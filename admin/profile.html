<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Profile</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .profile-wrapper {
      max-width: 1200px;
      margin: 0 auto;
    }

    .profile-grid {
      display: grid;
      grid-template-columns: 350px 1fr;
      gap: clamp(20px, 3vw, 32px);
      margin-top: clamp(24px, 4vw, 32px);
    }

    @media (max-width: 968px) {
      .profile-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Profile Card - Left Side */
    .profile-card {
      background: linear-gradient(135deg, var(--c-black) 0%, var(--c-dark) 100%);
      border-radius: var(--radius);
      padding: clamp(28px, 4vw, 36px);
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      text-align: center;
      height: fit-content;
    }

    .profile-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: var(--c-accent);
    }

    .profile-avatar {
      width: clamp(110px, 20vw, 150px);
      height: clamp(110px, 20vw, 150px);
      border-radius: 50%;
      background: linear-gradient(135deg, var(--c-accent) 0%, #00a844 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      font-size: clamp(3rem, 8vw, 4.5rem);
      color: white;
      font-weight: 800;
      font-family: 'Barlow Condensed', sans-serif;
      box-shadow: 0 10px 30px rgba(0, 200, 83, 0.4);
      border: 5px solid rgba(255, 255, 255, 0.15);
    }

    .profile-name {
      font-family: 'Barlow Condensed', sans-serif;
      font-size: clamp(1.6rem, 4vw, 2.2rem);
      font-weight: 800;
      color: var(--c-pure);
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .profile-role {
      display: inline-block;
      background: rgba(0, 200, 83, 0.2);
      border: 1.5px solid rgba(0, 200, 83, 0.4);
      color: var(--c-accent);
      padding: 8px 20px;
      border-radius: var(--radius-pill);
      font-size: clamp(0.75rem, 2vw, 0.85rem);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 20px;
    }

    .profile-email {
      color: var(--c-light);
      font-size: clamp(0.9rem, 2vw, 1rem);
      margin-bottom: 28px;
      word-break: break-word;
      font-weight: 500;
    }

    .profile-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 28px;
      padding-top: 28px;
      border-top: 1px solid rgba(255, 255, 255, 0.15);
    }

    .profile-stat {
      text-align: center;
    }

    .profile-stat-value {
      font-family: 'Barlow Condensed', sans-serif;
      font-size: clamp(1.8rem, 5vw, 2.5rem);
      font-weight: 800;
      color: var(--c-pure);
      display: block;
      line-height: 1;
    }

    .profile-stat-label {
      font-size: clamp(0.7rem, 1.8vw, 0.78rem);
      color: var(--c-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-top: 8px;
      font-weight: 600;
    }

    /* Settings Section - Right Side */
    .settings-section {
      display: flex;
      flex-direction: column;
      gap: clamp(18px, 3vw, 24px);
    }

    .settings-card {
      background: white;
      border-radius: var(--radius);
      padding: clamp(24px, 4vw, 32px);
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .settings-card:hover {
      box-shadow: var(--shadow);
    }

    .settings-card h3 {
      font-family: 'Barlow Condensed', sans-serif;
      font-size: clamp(1.2rem, 3vw, 1.4rem);
      font-weight: 800;
      color: var(--c-black);
      margin-bottom: 24px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding-bottom: 14px;
      border-bottom: 3px solid var(--c-accent);
      position: relative;
    }

    .settings-card h3::before {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--c-black);
    }

    /* Info Rows */
    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .info-row:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .info-label {
      font-size: clamp(0.7rem, 2vw, 0.78rem);
      font-weight: 700;
      color: var(--c-muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .info-value {
      font-size: clamp(0.95rem, 2vw, 1.05rem);
      font-weight: 700;
      color: var(--c-black);
      font-family: 'Barlow Condensed', sans-serif;
      letter-spacing: 0.02em;
    }

    /* Settings Items with Toggle */
    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .setting-item:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .setting-info {
      flex: 1;
      padding-right: 20px;
    }

    .setting-label {
      font-size: clamp(0.95rem, 2vw, 1.05rem);
      font-weight: 700;
      color: var(--c-black);
      margin-bottom: 4px;
    }

    .setting-description {
      font-size: clamp(0.78rem, 2vw, 0.85rem);
      color: var(--c-muted);
      line-height: 1.5;
    }

    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      width: 56px;
      height: 30px;
      flex-shrink: 0;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #cbd5e0;
      transition: var(--transition);
      border-radius: 30px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: var(--transition);
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    input:checked + .toggle-slider {
      background-color: var(--c-accent);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1), 0 0 10px rgba(0, 200, 83, 0.2);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    .toggle-slider:hover {
      opacity: 0.9;
    }

    /* Status Badge */
    .status-badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: var(--radius-pill);
      font-size: clamp(0.7rem, 2vw, 0.75rem);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .status-badge.active {
      background: var(--c-accent-dim);
      color: #007a33;
      border: 1px solid rgba(0, 200, 83, 0.3);
    }

    .status-badge.inactive {
      background: #f0f0f0;
      color: var(--c-muted);
      border: 1px solid #e0e0e0;
    }

    /* Mobile Responsive */
    @media (max-width: 640px) {
      .profile-stats {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .info-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .setting-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .setting-info {
        padding-right: 0;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-brand">SportCourt Admin</div>
    <div class="navbar-links">
      <a href="dashboard.html">Dashboard</a>
      <a href="courts.html">Manage Courts</a>
      <a href="bookings.html">Manage Bookings</a>
      <a href="scanner.html">QR Scanner</a>
      <a href="profile.html">Profile</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
  </nav>

  <div class="dashboard-container profile-wrapper">
    <div class="dashboard-header">
      <h2>Admin Profile</h2>
      <p>Manage your account settings and preferences</p>
    </div>

    <div class="profile-grid">
      <!-- Left Side: Profile Card -->
      <div class="profile-card">
        <div class="profile-avatar" id="avatarInitial">A</div>
        <div class="profile-name" id="profileName">Admin</div>
        <div class="profile-role">Administrator</div>
        <div class="profile-email" id="profileEmail">admin@sportcourt.com</div>
        
        <div class="profile-stats">
          <div class="profile-stat">
            <span class="profile-stat-value" id="totalCourts">0</span>
            <span class="profile-stat-label">Courts</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="totalBookings">0</span>
            <span class="profile-stat-label">Bookings</span>
          </div>
        </div>
      </div>

      <!-- Right Side: Settings -->
      <div class="settings-section">
        <!-- Account Information -->
        <div class="settings-card">
          <h3>Account Information</h3>
          <div class="info-row">
            <span class="info-label">Email Address</span>
            <span class="info-value" id="infoEmail">admin@sportcourt.com</span>
          </div>
          <div class="info-row">
            <span class="info-label">Role</span>
            <span class="info-value">Administrator</span>
          </div>
          <div class="info-row">
            <span class="info-label">Account Status</span>
            <span class="status-badge active">Active</span>
          </div>
          <div class="info-row">
            <span class="info-label">Member Since</span>
            <span class="info-value" id="memberSince">Jan 2024</span>
          </div>
        </div>

        <!-- System Settings -->
        <div class="settings-card">
          <h3>Notification Settings</h3>
          
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">Email Notifications</div>
              <div class="setting-description">Receive email alerts for important updates</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="emailNotifications" checked onchange="saveSetting('emailNotifications', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">Booking Alerts</div>
              <div class="setting-description">Get notified when new bookings are made</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="bookingAlerts" checked onchange="saveSetting('bookingAlerts', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">Maintenance Alerts</div>
              <div class="setting-description">Receive alerts for scheduled maintenance</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="maintenanceAlerts" onchange="saveSetting('maintenanceAlerts', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">Daily Reports</div>
              <div class="setting-description">Receive daily summary of bookings and revenue</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="dailyReports" onchange="saveSetting('dailyReports', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <!-- System Preferences -->
        <div class="settings-card">
          <h3>System Preferences</h3>
          
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">Auto-Refresh Dashboard</div>
              <div class="setting-description">Automatically refresh dashboard data every 30 seconds</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="autoRefresh" onchange="saveSetting('autoRefresh', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">Sound Alerts</div>
              <div class="setting-description">Play sound for important notifications</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="soundAlerts" onchange="saveSetting('soundAlerts', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <!-- Brand Section -->
      <div class="footer-section footer-brand">
        <div class="footer-logo">
          <div class="footer-logo-mark"></div>
          <div class="footer-logo-text">SportCourt</div>
        </div>
        <p class="footer-description">
          Your premier destination for booking sports courts. Play anytime, anywhere with our seamless booking system.
        </p>
        <span class="footer-tagline">
          <span class="dot-live"></span>
          Book Smart, Play Hard
        </span>
      </div>

      <!-- Quick Links -->
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="footer-links">
          <a href="dashboard.html" class="footer-link">Dashboard</a>
          <a href="courts.html" class="footer-link">Browse Courts</a>
          <a href="bookings.html" class="footer-link">My Bookings</a>
          <a href="favorites.html" class="footer-link">Favorites</a>
          <a href="profile.html" class="footer-link">Profile</a>
        </div>
      </div>

      <!-- Resources -->
      <div class="footer-section">
        <h3>Resources</h3>
        <div class="footer-links">
          <a href="#" class="footer-link">FAQs</a>
          <a href="#" class="footer-link">How It Works</a>
          <a href="#" class="footer-link">Pricing</a>
          <a href="#" class="footer-link">Safety Guidelines</a>
          <a href="#" class="footer-link">Court Rules</a>
        </div>
      </div>

      <!-- Contact Information -->
      <div class="footer-section">
        <h3>Contact Us</h3>
        <div class="footer-contact-info">
          <div class="contact-item">
            <div class="contact-icon"></div>
            <div class="contact-details">
              <span class="contact-label">Email</span>
              <span class="contact-value">
                <a href="mailto:john@test.com">john@test.com</a>
              </span>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon"></div>
            <div class="contact-details">
              <span class="contact-label">Phone</span>
              <span class="contact-value">
                <a href="tel:+91234565">+91234565</a>
              </span>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon"></div>
            <div class="contact-details">
              <span class="contact-label">Support</span>
              <span class="contact-value">Customer Service</span>
            </div>
          </div>
        </div>

        <!-- Social Media Links -->
        <div class="footer-social">
          <a href="#" class="social-link" title="Facebook"></a>
          <a href="#" class="social-link" title="Twitter"></a>
          <a href="#" class="social-link" title="Instagram"></a>
          <a href="#" class="social-link" title="LinkedIn"></a>
        </div>
      </div>
    </div>

    <!-- Footer Bottom -->
    <div class="footer-bottom">
      <div class="footer-copyright">
        © 2026 SportCourt. All rights reserved. Made with <span class="heart"></span>
      </div>
      <div class="footer-legal">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Refund Policy</a>
        <a href="#">Accessibility</a>
      </div>
    </div>
  </footer>

  <script src="../js/api.js"></script>
  <script src="../js/auth.js"></script>
  <script>
    checkAdminAuth();

    // Load profile data
    async function loadProfile() {
      const email = localStorage.getItem("userEmail") || "admin@sportcourt.com";
      
      // Set email
      document.getElementById("profileEmail").textContent = email;
      document.getElementById("infoEmail").textContent = email;
      
      // Set avatar initial
      const initial = email.charAt(0).toUpperCase();
      document.getElementById("avatarInitial").textContent = initial;
      
      // Set profile name from email
      const name = email.split('@')[0].replace(/[._-]/g, ' ').toUpperCase();
      document.getElementById("profileName").textContent = name;

      // Load stats
      try {
        // Get total courts
        const courts = await apiFetch("/admin/courts", {
          headers: authHeader()
        });
        document.getElementById("totalCourts").textContent = courts.length;

        // Get total bookings
        const bookings = await apiFetch("/admin/bookings", {
          headers: authHeader()
        });
        document.getElementById("totalBookings").textContent = bookings.length;
      } catch (err) {
        console.error("Error loading stats:", err);
      }

      // Set member since date
      const memberSince = localStorage.getItem("memberSince") || "Jan 2024";
      document.getElementById("memberSince").textContent = memberSince;
    }

    // Load saved settings
    function loadSettings() {
      const settings = [
        'emailNotifications',
        'bookingAlerts',
        'maintenanceAlerts',
        'dailyReports',
        'autoRefresh',
        'soundAlerts'
      ];

      settings.forEach(setting => {
        const saved = localStorage.getItem(setting);
        if (saved !== null) {
          document.getElementById(setting).checked = saved === 'true';
        }
      });
    }

    // Save setting
    function saveSetting(key, value) {
      localStorage.setItem(key, value);
      
      // Show subtle feedback
      const label = document.querySelector(`#${key}`).closest('.setting-item').querySelector('.setting-label');
      const originalText = label.textContent;
      label.textContent = '✓ ' + originalText;
      
      setTimeout(() => {
        label.textContent = originalText;
      }, 1500);
    }

    // Initialize
    loadProfile();
    loadSettings();
  </script>
</body>
</html>