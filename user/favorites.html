<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Favorite Courts - Sport Court Booking</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-brand">SportCourt</div>
    <div class="navbar-links">
      <a href="dashboard.html">Dashboard</a>
      <a href="courts.html">Book Courts</a>
      <a href="bookings.html">My Bookings</a>
      <a href="favorites.html">Favorites</a>
      <a href="profile.html">Profile</a>
      <div class="notification-badge">
        <a href="#" onclick="toggleNotifications(); return false;">üîî <span id="notifBadge" class="badge" style="display:none;">0</span></a>
      </div>
      <a href="#" onclick="logout()">Logout</a>
    </div>
  </nav>

  <div id="notificationPanel" class="notification-panel">
    <div class="notification-header">
      <h3>Notifications</h3>
      <span class="close" onclick="toggleNotifications()">&times;</span>
    </div>
    <div id="notificationList"></div>
  </div>

  <div class="dashboard-container">
    <div class="dashboard-header">
      <h2>Favorite Courts</h2>
      <p>Quick access to your favorite courts</p>
    </div>

    <div id="favoritesGrid" class="courts-grid">
      <div class="spinner"></div>
    </div>
  </div>

    <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <!-- Brand Section -->
      <div class="footer-section footer-brand">
        <div class="footer-logo">
          <div class="footer-logo-mark"></div>
          <div class="footer-logo-text">SportCourt</div>
        </div>
        <p class="footer-description">
          Your premier destination for booking sports courts. Play anytime, anywhere with our seamless booking system.
        </p>
        <span class="footer-tagline">
          <span class="dot-live"></span>
          Book Smart, Play Hard
        </span>
      </div>

      <!-- Quick Links -->
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="footer-links">
          <a href="dashboard.html" class="footer-link">Dashboard</a>
          <a href="courts.html" class="footer-link">Browse Courts</a>
          <a href="bookings.html" class="footer-link">My Bookings</a>
          <a href="favorites.html" class="footer-link">Favorites</a>
          <a href="profile.html" class="footer-link">Profile</a>
        </div>
      </div>

      <!-- Resources -->
      <div class="footer-section">
        <h3>Resources</h3>
        <div class="footer-links">
          <a href="#" class="footer-link">FAQs</a>
          <a href="#" class="footer-link">How It Works</a>
          <a href="#" class="footer-link">Pricing</a>
          <a href="#" class="footer-link">Safety Guidelines</a>
          <a href="#" class="footer-link">Court Rules</a>
        </div>
      </div>

      <!-- Contact Information -->
      <div class="footer-section">
        <h3>Contact Us</h3>
        <div class="footer-contact-info">
          <div class="contact-item">
            <div class="contact-icon"></div>
            <div class="contact-details">
              <span class="contact-label">Email</span>
              <span class="contact-value">
                <a href="mailto:john@test.com">john@test.com</a>
              </span>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon"></div>
            <div class="contact-details">
              <span class="contact-label">Phone</span>
              <span class="contact-value">
                <a href="tel:+91234565">+91234565</a>
              </span>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon"></div>
            <div class="contact-details">
              <span class="contact-label">Support</span>
              <span class="contact-value">Customer Service</span>
            </div>
          </div>
        </div>

        <!-- Social Media Links -->
        <div class="footer-social">
          <a href="#" class="social-link" title="Facebook"></a>
          <a href="#" class="social-link" title="Twitter"></a>
          <a href="#" class="social-link" title="Instagram"></a>
          <a href="#" class="social-link" title="LinkedIn"></a>
        </div>
      </div>
    </div>

    <!-- Footer Bottom -->
    <div class="footer-bottom">
      <div class="footer-copyright">
        ¬© 2026 SportCourt. All rights reserved. Made with <span class="heart"></span>
      </div>
      <div class="footer-legal">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Refund Policy</a>
        <a href="#">Accessibility</a>
      </div>
    </div>
  </footer>

  <script src="../js/api.js"></script>
  <script src="../js/auth.js"></script>
  <script src="../js/notifications.js"></script>
  <script>
    checkAuth();

    const courtIcons = {
      tennis: 'üéæ',
      basketball: 'üèÄ',
      football: '‚öΩ',
      futsal: '‚öΩ'
    };

    async function loadFavorites() {
      try {
        const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
        
        if (favorites.length === 0) {
          document.getElementById("favoritesGrid").innerHTML = 
            '<div class="card"><p>No favorite courts yet. <a href="courts.html">Browse courts</a> to add favorites!</p></div>';
          return;
        }

        const courts = await apiFetch("/courts");
        const favoriteCourts = courts.filter(c => favorites.includes(c.id));

        displayFavorites(favoriteCourts);
      } catch(err) {
        console.error("Error loading favorites:", err);
        document.getElementById("favoritesGrid").innerHTML = '<p>Error loading favorites.</p>';
      }
    }

    function displayFavorites(courts) {
      const grid = document.getElementById("favoritesGrid");

      grid.innerHTML = courts.map(court => `
        <div class="court-card">
          <button class="favorite-btn" onclick="removeFavorite(${court.id})">‚≠ê</button>
          <div class="court-icon">${courtIcons[court.type] || 'üèüÔ∏è'}</div>
          <div class="court-name">${court.name}</div>
          <div class="court-type">${court.type.charAt(0).toUpperCase() + court.type.slice(1)}</div>
          <div class="court-price">${court.price_per_hour} coins/hr</div>
          <button onclick="quickBook(${court.id})" class="success">Quick Book</button>
        </div>
      `).join('');
    }

    function removeFavorite(courtId) {
      let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
      favorites = favorites.filter(id => id !== courtId);
      localStorage.setItem('favorites', JSON.stringify(favorites));
      showAlert('Removed from favorites', 'info');
      loadFavorites();
    }

    function quickBook(courtId) {
      localStorage.setItem('selectedCourtId', courtId);
      location.href = 'booking.html';
    }

    loadFavorites();
    loadNotifications();
  </script>
</body>
</html>
